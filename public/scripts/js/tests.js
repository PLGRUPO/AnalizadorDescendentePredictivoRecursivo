var assert = chai.assert;

var foobar = {

  localStore: function () {
    if (localStorage) {
      return "true";
    }
    else {
      return "false";
    }
  },
  test: function (text) {
    return test_main(text);
  }
};

suite('Lexical Analysis ', function() {

    test('Verifying Localstorage   ', function () {
        assert.deepEqual(foobar.localStore(),'true');
    });
    test('Simple test ', function () {
      assert.deepEqual(foobar.test("CONST  m =  7,  n = 85; VAR a, b;BEGIN  a = x;  b = 4 END."),'[  {    "type": "=",    "left": {      "type": "CONSTANT",      "value": "m"    },    "right": {      "type": "NUM",      "value": 7    }  },  {    "type": "=",    "left": {      "type": "CONSTANT",      "value": "n"    },    "right": {      "type": "NUM",      "value": 85    }  },  {    "type": "VARIABLE",    "value": "a"  },  {    "type": "VARIABLE",    "value": "b"  },  [    {      "type": "=",      "left": {        "type": "ID",        "value": "a"      },      "right": {        "type": "ID",        "value": "x"      }    },    {      "type": "=",      "left": {        "type": "ID",        "value": "b"      },      "right": {        "type": "NUM",        "value": 4      }    }  ]]');
    });
    test('IF and WHILE ', function () {
      assert.deepEqual(foobar.test("VAR a, b, c;BEGIN  IF a == 1 THEN  WHILE b <= 5 DO  a = a + 1 END."),'[  {    "type": "VARIABLE",    "value": "a"  },  {    "type": "VARIABLE",    "value": "b"  },  {    "type": "VARIABLE",    "value": "c"  },  [    {      "type": "IF",      "cond": {        "type": "==",        "left": {          "type": "ID",          "value": "a"        },        "right": {          "type": "NUM",          "value": 1        }      },      "oper": {        "type": "WHILE",        "cond": {          "type": "<=",          "left": {            "type": "ID",            "value": "b"          },          "right": {            "type": "NUM",            "value": 5          }        },        "oper": {          "type": "=",          "left": {            "type": "ID",            "value": "a"          },          "right": {            "type": "+",            "left": {              "type": "ID",              "value": "a"            },            "right": {              "type": "NUM",              "value": 1            }          }        }      }    }  ]]');
    });
    test('PROCEDURE ', function () {
      assert.deepEqual(foobar.test("VAR x, squ;PROCEDURE square;BEGIN   squ= x * x END; BEGIN   x = 1;   WHILE x <= 10 DO   BEGIN      CALL square;    x = x + 1   END END."),'[  {    "type": "VARIABLE",    "value": "x"  },  {    "type": "VARIABLE",    "value": "squ"  },  {    "type": "PROCEDURE",    "name": "square",    "oper": [      [        {          "type": "=",          "left": {            "type": "ID",            "value": "squ"          },          "right": {            "type": "*",            "left": {              "type": "ID",              "value": "x"            },            "right": {              "type": "ID",              "value": "x"            }          }        }      ]    ]  },  [    {      "type": "=",      "left": {        "type": "ID",        "value": "x"      },      "right": {        "type": "NUM",        "value": 1      }    },    {      "type": "WHILE",      "cond": {        "type": "<=",        "left": {          "type": "ID",          "value": "x"        },        "right": {          "type": "NUM",          "value": 10        }      },      "oper": [        {          "type": "CALL",          "value": "square"        },        {          "type": "=",          "left": {            "type": "ID",            "value": "x"          },          "right": {            "type": "+",            "left": {              "type": "ID",              "value": "x"            },            "right": {              "type": "NUM",              "value": 1            }          }        }      ]    }  ]]');
    });
    test('Complex input ', function () {
      assert.deepEqual(foobar.test("BEGIN  r = x;  q = 0;  w = y;  WHILE w <= r DO w = 2 * w;  WHILE w > y DO BEGIN    q = 2 * q;    w = w / 2;    IF w <= r THEN BEGIN      r = r - w;      q = q + 1    END  END END."),'[  [    {      "type": "=",      "left": {        "type": "ID",        "value": "r"      },      "right": {        "type": "ID",        "value": "x"      }    },    {      "type": "=",      "left": {        "type": "ID",        "value": "q"      },      "right": {        "type": "NUM",        "value": 0      }    },    {      "type": "=",      "left": {        "type": "ID",        "value": "w"      },      "right": {        "type": "ID",        "value": "y"      }    },    {      "type": "WHILE",      "cond": {        "type": "<=",        "left": {          "type": "ID",          "value": "w"        },        "right": {          "type": "ID",          "value": "r"        }      },      "oper": {        "type": "=",        "left": {          "type": "ID",          "value": "w"        },        "right": {          "type": "*",          "left": {            "type": "NUM",            "value": 2          },          "right": {            "type": "ID",            "value": "w"          }        }      }    },    {      "type": "WHILE",      "cond": {        "type": ">",        "left": {          "type": "ID",          "value": "w"        },        "right": {          "type": "ID",          "value": "y"        }      },      "oper": [        {          "type": "=",          "left": {            "type": "ID",            "value": "q"          },          "right": {            "type": "*",            "left": {              "type": "NUM",              "value": 2            },            "right": {              "type": "ID",              "value": "q"            }          }        },        {          "type": "=",          "left": {            "type": "ID",            "value": "w"          },          "right": {            "type": "/",            "left": {              "type": "ID",              "value": "w"            },            "right": {              "type": "NUM",              "value": 2            }          }        },        {          "type": "IF",          "cond": {            "type": "<=",            "left": {              "type": "ID",              "value": "w"            },            "right": {              "type": "ID",              "value": "r"            }          },          "oper": [            {              "type": "=",              "left": {                "type": "ID",                "value": "r"              },              "right": {                "type": "-",                "left": {                  "type": "ID",                  "value": "r"                },                "right": {                  "type": "ID",                  "value": "w"                }              }            },            {              "type": "=",              "left": {                "type": "ID",                "value": "q"              },              "right": {                "type": "+",                "left": {                  "type": "ID",                  "value": "q"                },                "right": {                  "type": "NUM",                  "value": 1                }              }            }          ]        }      ]    }  ]]');
    });

});
